# This file is generated by ALMA. Manual changes will be overwritten.

terraform {
  required_providers {
    docker = {
      source  = "kreuzwerker/docker"
      version = "~> 3.0.1"
    }
    # Proxmox provider could be added here later
    # proxmox = {
    #   source = "telmate/proxmox"
    #   version = "2.9.11"
    # }
  }
}

provider "docker" {}

# --- Resources ---
{% for resource in resources %}
# Blueprint Resource: {{ resource.name }} ({{ resource.type }})
resource "{{ resource.tf_type }}" "{{ resource.name }}" {
  {% if resource.tf_type == "docker_image" %}
  name = "{{ resource.specs.image }}"
  keep_locally = false
  {% elif resource.tf_type == "docker_container" %}
  name  = "{{ resource.name }}"
  image = resource.docker_image.{{ resource.image_resource_name }}.image_id

  {% if resource.specs.ports %}
  ports {
    # This is a simplification; blueprints might need to specify internal/external.
    internal = {{ resource.specs.ports[0] }}
    external = {{ resource.specs.ports[0] }}
  }
  {% endif %}
  {% endif %}
}
{% endfor %}
